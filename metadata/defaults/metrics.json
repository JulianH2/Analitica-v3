{
  "ingreso_viaje": {
    "name": "Ingreso Viaje (Subtotal)",
    "recipe": {
      "table": "h_viaje",
      "column": "subtotal",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "ingreso_viaje_anterior": {
    "name": "Ingreso Viaje Año Anterior",
    "recipe": {
      "table": "h_viaje",
      "column": "subtotal",
      "aggregation": "SUM",
      "time_modifier": "previous_year",
      "format": "currency"
    }
  },
  "ingreso_viaje_acumulado": {
    "name": "Ingreso Viaje Acumulado (YTD)",
    "recipe": {
      "table": "h_viaje",
      "column": "subtotal",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "currency"
    }
  },
  "meta_ingreso_viaje": {
    "name": "Meta Ingreso Viaje",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_ingreso_viaje",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "ingreso_esperado": {
    "name": "Ingreso Esperado",
    "description": "Alias de Meta para contextos de proyección",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_ingreso_viaje",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "pct_desviacion_ingreso_vs_anterior": {
    "name": "% Desviación Ingreso vs Anterior",
    "type": "derived",
    "formula": "(ingreso_viaje - ingreso_viaje_anterior) / ingreso_viaje_anterior",
    "format": "percent"
  },
  "pct_desviacion_ingreso_acumulado": {
    "name": "% Desviación Ingreso Acumulado",
    "type": "derived",
    "formula": "(ingreso_viaje_acumulado - meta_ingreso_viaje_acumulado) / meta_ingreso_viaje_acumulado",
    "format": "percent"
  },
  "viajes": {
    "name": "Viajes",
    "recipe": {
      "table": "h_viaje",
      "column": "no_viaje",
      "aggregation": "COUNT",
      "format": "integer"
    }
  },
  "viajes_anterior": {
    "name": "Viajes Año Anterior",
    "recipe": {
      "table": "h_viaje",
      "column": "no_viaje",
      "aggregation": "COUNT",
      "time_modifier": "previous_year",
      "format": "integer"
    }
  },
  "viajes_acumulado": {
    "name": "Viajes Acumulado (YTD)",
    "recipe": {
      "table": "h_viaje",
      "column": "no_viaje",
      "aggregation": "COUNT",
      "time_modifier": "ytd",
      "format": "integer"
    }
  },
  "meta_viajes": {
    "name": "Meta Viaje",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_viajes",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "viajes_esperado": {
    "name": "Viajes Esperado",
    "description": "Proyección de viajes basada en meta",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_viajes",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "meta_viajes_acumulado": {
    "name": "Meta Viajes Acumulado (YTD)",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_viajes",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "integer"
    }
  },
  "diff_viajes_vs_anterior": {
    "name": "Viajes vs Anterior",
    "type": "derived",
    "formula": "viajes - viajes_anterior",
    "format": "integer"
  },
  "pct_desviacion_viajes_vs_anterior": {
    "name": "% Desviación Viajes vs Anterior",
    "type": "derived",
    "formula": "(viajes - viajes_anterior) / viajes_anterior",
    "format": "percent"
  },
  "pct_desviacion_viajes_acumulado": {
    "name": "% Desviación Viajes Acumulado",
    "type": "derived",
    "formula": "(viajes_acumulado - meta_viajes_acumulado) / meta_viajes_acumulado",
    "format": "percent"
  },
  "kilometros": {
    "name": "Kms Recorridos",
    "recipe": {
      "table": "h_viaje",
      "column": "kms_viaje",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "kilometros_anterior": {
    "name": "Kms Recorridos Año Anterior",
    "recipe": {
      "table": "h_viaje",
      "column": "kms_viaje",
      "aggregation": "SUM",
      "time_modifier": "previous_year",
      "format": "integer"
    }
  },
  "kilometros_acumulado": {
    "name": "Kms Recorridos Acumulado (YTD)",
    "recipe": {
      "table": "h_viaje",
      "column": "kms_viaje",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "integer"
    }
  },
  "meta_kilometros": {
    "name": "Meta Kms Real",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_kms_recorridos",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "kilometros_esperado": {
    "name": "Kilómetros Esperado",
    "description": "Alias de Meta Kms para proyecciones",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_kms_real",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "meta_ingreso_viaje_acumulado": {
    "name": "Meta Ingreso Viaje Acumulado (YTD)",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_ingreso_viaje",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "currency"
    }
  },
  "meta_kilometros_acumulado": {
    "name": "Meta Kms Real Acumulado (YTD)",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_kms_recorridos",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "integer"
    }
  },
  "pct_desviacion_kilometros_vs_anterior": {
    "name": "% Desviación Kms Real vs Anterior",
    "type": "derived",
    "formula": "(kilometros - kilometros_anterior) / kilometros_anterior",
    "format": "percent"
  },
  "pct_desviacion_kilometros_acumulado": {
    "name": "% Desviación Kms Real Acumulado",
    "type": "derived",
    "formula": "(kilometros_acumulado - meta_kilometros_acumulado) / meta_kilometros_acumulado",
    "format": "percent"
  },
  "costo_viaje": {
    "name": "Costo Viaje Total",
    "recipe": {
      "table": "h_viajes_gastos_liquidacion",
      "column": "monto_concepto",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "flete": {
    "name": "Flete",
    "recipe": {
      "table": "h_viaje",
      "column": "flete",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "otros_costos": {
    "name": "Otros Costos",
    "recipe": {
      "table": "h_viaje",
      "column": "otros",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "kms_viaje": {
    "name": "Kms Viaje",
    "recipe": {
      "table": "d_viaje",
      "column": "kms_viaje",
      "aggregation": "SUM",
      "format": "integer"
    },
    "description": "Justificación KB: d_viaje[kms_viaje] (cite: 140)"
  },
  "otros_ingresos": {
    "name": "Otros Ingresos",
    "type": "derived",
    "formula": "ingreso_viaje - flete",
    "format": "currency"
  },
  "sueldo_operador": {
    "name": "Sueldo Operador",
    "recipe": {
      "table": "d_viaje",
      "column": "sueldo_operador",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "costo_liquidacion": {
    "name": "Costo Liquidación",
    "recipe": {
      "table": "h_viajes_gastos_liquidacion",
      "column": "monto_concepto",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "ingreso_x_km": {
    "name": "Ingreso x Km",
    "type": "derived",
    "formula": "ingreso_viaje / kms_viaje if kms_viaje else 0",
    "format": "currency"
  },
  "ingreso_x_viaje": {
    "name": "Ingreso x Viaje",
    "type": "derived",
    "formula": "ingreso_viaje / viajes if viajes else 0",
    "format": "currency"
  },
  "costo_viaje_total": {
    "name": "Costo Viaje Total",
    "type": "derived",
    "formula": "costo_liquidacion + sueldo_operador",
    "format": "currency",
    "description": "Base para cálculo de utilidad"
  },
  "utilidad": {
    "name": "Monto Utilidad",
    "type": "derived",
    "formula": "ingreso_viaje - costo_viaje_total",
    "format": "currency"
  },
  "margen_utilidad": {
    "name": "% Margen Utilidad Viaje",
    "type": "derived",
    "formula": "(ingreso_viaje - costo_viaje_total) / ingreso_viaje if ingreso_viaje else 0",
    "format": "percent"
  },
  "costo_x_km": {
    "name": "Costo Viaje x Km",
    "type": "derived",
    "formula": "costo_viaje_total / kms_viaje if kms_viaje else 0",
    "format": "currency"
  },
  "combustible": {
    "name": "Combustible",
    "recipe": {
      "table": "h_viajes_gastos_liquidacion",
      "column": "monto_combustible",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "caseta_iave": {
    "name": "Caseta IAVE",
    "recipe": {
      "table": "h_viajes_gastos_liquidacion",
      "column": "monto_caseta_iave",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "caseta_efectivo": {
    "name": "Caseta Efectivo",
    "recipe": {
      "table": "h_viajes_gastos_liquidacion",
      "column": "monto_caseta_efectivo",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "unidades_utilizadas": {
    "name": "Unidades Utilizadas",
    "recipe": {
      "table": "d_viaje",
      "column": "id_unidad",
      "aggregation": "DISTINCTCOUNT"
    },
    "format": "integer"
  },
  "unidades_utilizadas_anterior": {
    "name": "Unidades Utilizadas Año Anterior",
    "recipe": {
      "table": "d_viaje",
      "column": "id_unidad",
      "aggregation": "DISTINCTCOUNT",
      "time_modifier": "previous_year"
    },
    "format": "integer"
  },
  "pct_desviacion_unidades_vs_anterior": {
    "name": "% Desviación Unidades Utilizadas vs Anterior",
    "type": "derived",
    "formula": "(unidades_utilizadas - unidades_utilizadas_anterior) / unidades_utilizadas_anterior",
    "format": "percent"
  },
  "ingreso_unit": {
    "name": "Ingreso por Tractocamión",
    "type": "derived",
    "formula": "ingreso_viaje / unidades_utilizadas",
    "format": "currency"
  },
  "ingreso_unit_anterior": {
    "name": "Ingreso por Unidad Año Anterior",
    "type": "derived",
    "formula": "ingreso_viaje_anterior / unidades_utilizadas_anterior",
    "format": "currency"
  },
  "pct_desviacion_ingreso_unit_anterior": {
    "name": "% Desviación Ingreso x Unidad vs Anterior",
    "type": "derived",
    "formula": "(ingreso_unit - ingreso_unit_anterior) / ingreso_unit_anterior",
    "format": "percent"
  },
  "clientes_servidos": {
    "name": "Clientes Servidos",
    "recipe": {
      "table": "d_trafico_guia",
      "column": "id_cliente",
      "aggregation": "DISTINCTCOUNT"
    },
    "format": "integer"
  },
  "clientes_servidos_anterior": {
    "name": "Clientes Servidos Año Anterior",
    "recipe": {
      "table": "d_trafico_guia",
      "column": "id_cliente",
      "aggregation": "DISTINCTCOUNT",
      "time_modifier": "previous_year"
    },
    "format": "integer"
  },
  "pct_desviacion_clientes_vs_anterior": {
    "name": "% Desviación Clientes vs Anterior",
    "type": "derived",
    "formula": "(clientes_servidos - clientes_servidos_anterior) / clientes_servidos_anterior",
    "format": "percent"
  },
  "viajes_cargados": {
    "name": "Viajes con Carga",
    "recipe": {
      "table": "d_viaje",
      "column": "ind_cargado",
      "aggregation": "SUM"
    },
    "format": "integer"
  },
  "utilizacion_flota": {
    "name": "Porcentaje de Carga",
    "type": "derived",
    "formula": "(viajes_cargados / viajes) * 100",
    "format": "percent"
  },
  "ingreso_x_viaje_anterior": {
    "name": "Ingreso x Viaje Anterior",
    "type": "derived",
    "formula": "ingreso_viaje_anterior / viajes_anterior if viajes_anterior else 0",
    "format": "currency"
  },
  "kms_real": {
    "name": "Kms Reales",
    "recipe": {
      "table": "d_viaje",
      "column": "kms_real",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "litros_real": {
    "name": "Litros Reales",
    "recipe": {
      "table": "d_viaje",
      "column": "lts_real",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "kms_anterior": {
    "name": "Kms Año Anterior",
    "recipe": {
      "table": "d_viaje",
      "column": "kms_real",
      "aggregation": "SUM",
      "time_modifier": "previous_year",
      "format": "integer"
    }
  },
  "litros_anterior": {
    "name": "Litros Año Anterior",
    "recipe": {
      "table": "d_viaje",
      "column": "lts_real",
      "aggregation": "SUM",
      "time_modifier": "previous_year",
      "format": "integer"
    }
  },
  "kms_acumulado": {
    "name": "Kms Acumulado YTD",
    "recipe": {
      "table": "d_viaje",
      "column": "kms_real",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "integer"
    }
  },
  "litros_acumulado": {
    "name": "Litros Acumulado YTD",
    "recipe": {
      "table": "d_viaje",
      "column": "lts_real",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "integer"
    }
  },
  "meta_kms": {
    "name": "Meta Kms",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_kms_recorridos",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "meta_rendimiento_real": {
    "name": "Meta Rendimiento Real",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_rendimiento_combustible",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "meta_kms_acumulado": {
    "name": "Meta Kms YTD",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_kms_recorridos",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "integer"
    }
  },
  "meta_litros_acumulado": {
    "name": "Meta Litros YTD",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_litros_combustible",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "integer"
    }
  },
  "viajes_real": {
    "name": "Cantidad Viajes",
    "recipe": { "table": "d_viaje", "column": "no_viaje", "aggregation": "COUNT", "format": "integer" }
  },
  "litros_viaje": {
    "name": "Litros Viaje",
    "recipe": { "table": "d_viaje", "column": "lts_viaje", "aggregation": "SUM", "format": "integer" }
  },
  "meta_litros": {
    "name": "Meta Litros Total",
    "recipe": { "table": "d_meta_tiempo", "column": "meta_litros_combustible", "aggregation": "SUM", "format": "integer" }
  },
  "litros_real_anterior": {
    "name": "Litros Real Año Anterior",
    "recipe": { "table": "d_viaje", "column": "lts_real", "aggregation": "SUM", "time_modifier": "previous_year", "format": "integer" }
  },
  "litros_viaje_anterior": {
    "name": "Litros Viaje Año Anterior",
    "recipe": { "table": "d_viaje", "column": "lts_viaje", "aggregation": "SUM", "time_modifier": "previous_year", "format": "integer" }
  },
  "litros_real_acumulado": {
    "name": "Litros Real Acumulado",
    "recipe": { "table": "d_viaje", "column": "lts_real", "aggregation": "SUM", "time_modifier": "ytd", "format": "integer" }
  },
  "litros_viaje_acumulado": {
    "name": "Litros Viaje Acumulado",
    "recipe": { "table": "d_viaje", "column": "lts_viaje", "aggregation": "SUM", "time_modifier": "ytd", "format": "integer" }
  },
  "meta_ingreso": {
    "name": "Meta Ingreso",
    "recipe": { "table": "d_meta_tiempo", "column": "meta_ingreso_viaje", "aggregation": "SUM", "format": "currency" }
  },
  "meta_costo": {
    "name": "Meta Costo",
    "recipe": { "table": "d_meta_tiempo", "column": "meta_costos_viaje", "aggregation": "SUM", "format": "currency" }
  },
  "meta_ingreso_acumulado": {
    "name": "Meta Ingreso YTD",
    "recipe": { "table": "d_meta_tiempo", "column": "meta_ingreso_viaje", "aggregation": "SUM", "time_modifier": "ytd", "format": "currency" }
  },
  "meta_costo_acumulado": {
    "name": "Meta Costo YTD",
    "recipe": { "table": "d_meta_tiempo", "column": "meta_costos_viaje", "aggregation": "SUM", "time_modifier": "ytd", "format": "currency" }
  },
  "costo_anterior": {
    "name": "Costo Año Anterior",
    "recipe": {
      "table": "h_viajes_gastos_liquidacion",
      "column": "monto_concepto",
      "aggregation": "SUM",
      "time_modifier": "previous_year",
      "format": "currency"
    }
  },
  "costo_acumulado": {
    "name": "Costo Acumulado YTD",
    "recipe": {
      "table": "h_viajes_gastos_liquidacion",
      "column": "monto_concepto",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "currency"
    }
  },
  "meta_utilidad_acumulada": {
    "name": "Meta Utilidad YTD",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_utilidad",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "currency"
    }
  },
  "sueldo_operador_anterior": {
    "name": "Sueldo Operador Año Anterior",
    "recipe": {
      "table": "d_viaje",
      "column": "sueldo_operador",
      "aggregation": "SUM",
      "time_modifier": "previous_year",
      "format": "currency"
    }
  },
  "facturado_mes": {
    "name": "Facturado Mes",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_facturado_mx",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "facturado_acumulado": {
    "name": "Facturado Acumulado",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_facturado_mx",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "notas_credito_mes": {
    "name": "Notas Crédito mes",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_ncred_mx",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "notas_credito_acumulado": {
    "name": "Notas Crédito Acumulado",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_ncred_acum_mx",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "currency"
    }
  },
  "notas_cargo_mes": {
    "name": "Notas Cargo Mes",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_ncargo_mx",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "notas_cargo_acumulado": {
    "name": "Notas Cargo Acumulado",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_ncargo_acum_mx",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "cobrado_mes": {
    "name": "Cobrado Mes",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_cobrado_mx",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "cobrado_acumulado": {
    "name": "Cobrado Acumulado",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_cobrado_acum_mx",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "cartera_clientes": {
    "name": "Cartera de Clientes",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_saldo_acum_mx",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "nc_monto": {
    "name": "Monto Nota Crédito",
    "recipe": {
      "table": "d_nota_credito",
      "column": "monto_credito",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "nc_retencion": {
    "name": "Retención Nota Crédito",
    "recipe": {
      "table": "d_nota_credito",
      "column": "monto_retencion",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "nca_monto": {
    "name": "Monto Nota Cargo",
    "recipe": {
      "table": "d_nota_cargo",
      "column": "monto_cargo",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "nca_retencion": {
    "name": "Retención Nota Cargo",
    "recipe": {
      "table": "d_nota_cargo",
      "column": "monto_retencion",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "monto_cobrado_directo": {
    "name": "Monto Cobrado Directo",
    "recipe": {
      "table": "h_factura_cobrado",
      "column": "monto_cobrado",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "dias_cartera_promedio": {
    "name": "Promedio Días Cartera",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "DATEDIFF(day, fecha_factura, GETDATE())",
      "aggregation": "AVG",
      "format": "decimal"
    }
  },
  "dias_cartera_anterior": {
    "name": "Días Cartera Año Anterior",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "DATEDIFF(day, fecha_factura, GETDATE())",
      "aggregation": "AVG",
      "time_modifier": "previous_year",
      "format": "decimal"
    }
  },
  "meta_dias_cartera": {
    "name": "Meta Días Cartera",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_promedio_dias_cartera",
      "aggregation": "SUM",
      "format": "decimal"
    }
  },
  "cartera_vencida": {
    "name": "Cartera Vencida",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_saldo_acum_mx",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "facturado_mes_anterior": {
    "name": "Facturado Mes Año Anterior",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_facturado_mx",
      "aggregation": "SUM",
      "time_modifier": "previous_year",
      "format": "currency"
    }
  },
  "monto_cobrado": {
    "name": "Monto Cobrado Real",
    "description": "Suma del monto cobrado acumulado por factura",
    "recipe": {
      "table": "h_factura_saldo",
      "column": "monto_cobrado_acum_mx",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "saldo_inicial_proveedores": {
    "name": "Saldo Inicial Proveedores",
    "recipe": {
      "table": "h_proveedores",
      "column": "saldo_inicial",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "cxp_proveedores": {
    "name": "CxP del Periodo",
    "recipe": {
      "table": "h_proveedores",
      "column": "cxp",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "notas_cargo_proveedores": {
    "name": "Notas de Cargo Proveedores",
    "recipe": {
      "table": "h_proveedores",
      "column": "notas_cargo",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "notas_credito_proveedores": {
    "name": "Notas de Crédito Proveedores",
    "recipe": {
      "table": "h_proveedores",
      "column": "notas_credito",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "anticipos_proveedores": {
    "name": "Anticipos a Proveedores",
    "recipe": {
      "table": "h_proveedores",
      "column": "monto_anticipo",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "cxp_total_proveedores": {
    "name": "CxP Total",
    "recipe": {
      "table": "h_proveedores",
      "column": "cxp_total",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "pago_proveedores": {
    "name": "Pago a Proveedores",
    "recipe": {
      "table": "h_proveedores",
      "column": "pago_proveedores",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "saldo_final_proveedores": {
    "name": "Saldo Final Proveedores",
    "recipe": {
      "table": "h_proveedores",
      "column": "saldo_final",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "porcentaje_pagado_proveedores": {
    "name": "% Pagado a Proveedores",
    "type": "derived",
    "formula": "pago_proveedores / cxp_total_proveedores",
    "format": "percent"
  },
  "promedio_dias_pago": {
    "name": "Promedio Días Pago",
    "description": "Promedio de días transcurridos desde fecha_ini hasta fecha_pago",
    "recipe": {
      "table": "h_proveedores",
      "column": "DATEDIFF(day, fecha_ini, fecha_pago)",
      "aggregation": "AVG",
      "format": "integer"
    }
  },
  "meta_promedio_dias_pago": {
    "name": "Meta Promedio Días Pago",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_promedio_dias_pago",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "saldo_cxp": {
    "name": "Saldo CxP",
    "description": "Saldo final acumulado de proveedores",
    "recipe": {
      "table": "h_proveedores",
      "column": "saldo_final",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "cxp_proveedores_anterior": {
    "name": "CxP Año Anterior",
    "description": "Cuentas por pagar en el mismo periodo del año anterior",
    "recipe": {
      "table": "h_proveedores",
      "column": "cxp",
      "aggregation": "SUM",
      "time_modifier": "previous_year",
      "format": "currency"
    }
  },
  "pago_proveedores_anterior": {
    "name": "Pago Proveedores Año Anterior",
    "description": "Monto pagado a proveedores en el mismo periodo del año anterior",
    "recipe": {
      "table": "h_proveedores",
      "column": "pago_proveedores",
      "aggregation": "SUM",
      "time_modifier": "previous_year",
      "format": "currency"
    }
  },
  "saldo_inicial_consolidado": {
    "name": "Saldo Inicial Consolidado",
    "recipe": { "table": "h_bancos_saldos", "column": "saldo_inicial_consolidado", "aggregation": "SUM", "format": "currency" }
  },
  "ingresos_consolidado": {
    "name": "Ingresos Consolidado",
    "recipe": { "table": "h_bancos_saldos", "column": "ingresos_consolidado", "aggregation": "SUM", "format": "currency" }
  },
  "egresos_consolidado": {
    "name": "Egresos Consolidado",
    "recipe": { "table": "h_bancos_saldos", "column": "egresos_consolidado", "aggregation": "SUM", "format": "currency" }
  },
  "saldo_final_consolidado": {
    "name": "Saldo Final Consolidado",
    "recipe": { "table": "h_bancos_saldos", "column": "saldo_final_consolidado", "aggregation": "SUM", "format": "currency" }
  },

  "saldo_inicial_mxn": {
    "name": "Saldo Inicial MXN",
    "recipe": { "table": "h_bancos_saldos", "column": "saldo_inicial_pesos", "aggregation": "SUM", "format": "currency" }
  },
  "ingresos_mxn": {
    "name": "Ingresos MXN",
    "recipe": { "table": "h_bancos_saldos", "column": "ingresos_pesos", "aggregation": "SUM", "format": "currency" }
  },
  "egresos_mxn": {
    "name": "Egresos MXN",
    "recipe": { "table": "h_bancos_saldos", "column": "egresos_pesos", "aggregation": "SUM", "format": "currency" }
  },
  "saldo_final_mxn": {
    "name": "Saldo Final MXN",
    "recipe": { "table": "h_bancos_saldos", "column": "saldo_final_pesos", "aggregation": "SUM", "format": "currency" }
  },

  "saldo_inicial_usd": {
    "name": "Saldo Inicial USD",
    "recipe": { "table": "h_bancos_saldos", "column": "saldo_inicial_dlls", "aggregation": "SUM", "format": "currency" }
  },
  "ingresos_usd": {
    "name": "Ingresos USD",
    "recipe": { "table": "h_bancos_saldos", "column": "ingresos_dlls", "aggregation": "SUM", "format": "currency" }
  },
  "egresos_usd": {
    "name": "Egresos USD",
    "recipe": { "table": "h_bancos_saldos", "column": "egresos_dlls", "aggregation": "SUM", "format": "currency" }
  },
  "saldo_final_usd": {
    "name": "Saldo Final USD",
    "recipe": { "table": "h_bancos_saldos", "column": "saldo_final_dlls", "aggregation": "SUM", "format": "currency" }
  },
  "ingresos_mov_consolidado": {
    "name": "Ingresos Consolidado",
    "recipe": { "table": "h_bancos_movimientos", "column": "ingresos_consolidado", "aggregation": "SUM", "format": "currency" }
  },
  "egresos_mov_consolidado": {
    "name": "Egresos Consolidado",
    "recipe": { "table": "h_bancos_movimientos", "column": "egresos_consolidado", "aggregation": "SUM", "format": "currency" }
  },

  "ingresos_mov_mxn": {
    "name": "Ingresos MXN",
    "recipe": { "table": "h_bancos_movimientos", "column": "ingresos_pesos", "aggregation": "SUM", "format": "currency" }
  },
  "egresos_mov_mxn": {
    "name": "Egresos MXN",
    "recipe": { "table": "h_bancos_movimientos", "column": "egresos_pesos", "aggregation": "SUM", "format": "currency" }
  },

  "ingresos_mov_usd": {
    "name": "Ingresos USD",
    "recipe": { "table": "h_bancos_movimientos", "column": "ingresos_dlls", "aggregation": "SUM", "format": "currency" }
  },
  "egresos_mov_usd": {
    "name": "Egresos USD",
    "recipe": { "table": "h_bancos_movimientos", "column": "egresos_dlls", "aggregation": "SUM", "format": "currency" }
  },
  "kms_viaje_ruta": {
    "name": "Kms Viaje",
    "recipe": {
      "table": "d_viaje",
      "column": "kms_viaje",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "costo_mo_interno": {
    "name": "Costo Mano de Obra Interno",
    "description": "Costo calculado: Duración * Costo Hora",
    "recipe": {
      "table": "d_mo_orden",
      "column": "duracion * costo",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "costo_refacciones_interno": {
    "name": "Costo Refacciones Interno",
    "recipe": {
      "table": "h_taller_gasto_refacciones",
      "column": "monto_gto_ref",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "costo_mtto_interno": {
    "name": "Costo Mtto Interno",
    "description": "Suma de MO + Refacciones (Interno)",
    "type": "derived",
    "formula": "costo_mo_interno + costo_refacciones_interno",
    "format": "currency"
  },

  "costo_mo_interno_anterior": {
    "name": "Costo MO Interno Año Anterior",
    "recipe": {
      "table": "d_mo_orden",
      "column": "duracion * costo",
      "aggregation": "SUM",
      "time_modifier": "previous_year",
      "format": "currency"
    }
  },
  "costo_refacciones_interno_anterior": {
    "name": "Costo Refacciones Interno Año Anterior",
    "recipe": {
      "table": "h_taller_gasto_refacciones",
      "column": "monto_gto_ref",
      "aggregation": "SUM",
      "time_modifier": "previous_year",
      "format": "currency"
    }
  },
  "costo_mtto_interno_anterior": {
    "name": "Costo Mtto Interno Año Anterior",
    "type": "derived",
    "formula": "costo_mo_interno_anterior + costo_refacciones_interno_anterior",
    "format": "currency"
  },

  "costo_mo_interno_ytd": {
    "name": "Costo MO Interno Acumulado",
    "recipe": {
      "table": "d_mo_orden",
      "column": "duracion * costo",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "currency"
    }
  },
  "costo_refacciones_interno_ytd": {
    "name": "Costo Refacciones Interno Acumulado",
    "recipe": {
      "table": "h_taller_gasto_refacciones",
      "column": "monto_gto_ref",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "currency"
    }
  },
  "costo_mtto_interno_ytd": {
    "name": "Costo Mtto Interno Acumulado",
    "type": "derived",
    "formula": "costo_mo_interno_ytd + costo_refacciones_interno_ytd",
    "format": "currency"
  },

  "meta_costo_mtto_interno": {
    "name": "Meta Costo Mtto Interno",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_costo_tallerinterno",
      "aggregation": "SUM",
      "format": "currency"
    }
  },
  "meta_costo_mtto_interno_ytd": {
    "name": "Meta Costo Mtto Interno Acumulado",
    "recipe": {
      "table": "d_meta_tiempo",
      "column": "meta_costo_tallerinterno",
      "aggregation": "SUM",
      "time_modifier": "ytd",
      "format": "currency"
    }
  },
  "costo_mo_externo": {
    "name": "Costo Mano de Obra Externo",
    "recipe": { "table": "h_taller_gasto_taller_externo", "column": "costo_mano_obra_ext", "aggregation": "SUM", "format": "currency" }
  },
  "costo_refacciones_externo": {
    "name": "Costo Refacciones Externo",
    "recipe": { "table": "h_taller_gasto_taller_externo", "column": "costo_refacciones_ext", "aggregation": "SUM", "format": "currency" }
  },
  "costo_mtto_externo": {
    "name": "Costo Mtto Externo",
    "description": "Suma de MO + Refacciones (Externo)",
    "type": "derived",
    "formula": "costo_mo_externo + costo_refacciones_externo",
    "format": "currency"
  },
  "costo_mo_externo_anterior": {
    "name": "Costo MO Externo Año Anterior",
    "recipe": { "table": "h_taller_gasto_taller_externo", "column": "costo_mano_obra_ext", "aggregation": "SUM", "time_modifier": "previous_year", "format": "currency" }
  },
  "costo_refacciones_externo_anterior": {
    "name": "Costo Refacciones Externo Año Anterior",
    "recipe": { "table": "h_taller_gasto_taller_externo", "column": "costo_refacciones_ext", "aggregation": "SUM", "time_modifier": "previous_year", "format": "currency" }
  },
  "costo_mtto_externo_anterior": {
    "name": "Costo Mtto Externo Año Anterior",
    "type": "derived",
    "formula": "costo_mo_externo_anterior + costo_refacciones_externo_anterior",
    "format": "currency"
  },

  "costo_mo_externo_ytd": {
    "name": "Costo MO Externo Acumulado",
    "recipe": { "table": "h_taller_gasto_taller_externo", "column": "costo_mano_obra_ext", "aggregation": "SUM", "time_modifier": "ytd", "format": "currency" }
  },
  "costo_refacciones_externo_ytd": {
    "name": "Costo Refacciones Externo Acumulado",
    "recipe": { "table": "h_taller_gasto_taller_externo", "column": "costo_refacciones_ext", "aggregation": "SUM", "time_modifier": "ytd", "format": "currency" }
  },
  "costo_mtto_externo_ytd": {
    "name": "Costo Mtto Externo Acumulado",
    "type": "derived",
    "formula": "costo_mo_externo_ytd + costo_refacciones_externo_ytd",
    "format": "currency"
  },
  "meta_costo_mtto_externo": {
    "name": "Meta Costo Mtto Externo",
    "recipe": { "table": "d_meta_tiempo", "column": "meta_costo_tallerexterno", "aggregation": "SUM", "format": "currency" }
  },
  "meta_costo_mtto_externo_ytd": {
    "name": "Meta Costo Mtto Externo Acumulado",
    "recipe": { "table": "d_meta_tiempo", "column": "meta_costo_tallerexterno", "aggregation": "SUM", "time_modifier": "ytd", "format": "currency" }
  },
  "costo_llantas_nuevas": {
    "name": "Costo Llantas Nuevas",
    "recipe": { "table": "h_llantas_nueva", "column": "monto_llantas_nva", "aggregation": "SUM", "format": "currency" }
  },
  "costo_llantas_renovadas": {
    "name": "Costo Llantas Renovadas",
    "recipe": { "table": "h_llantas_renovada", "column": "monto_llantas_ren", "aggregation": "SUM", "format": "currency" }
  },
  "costo_llantas_nuevas_anterior": {
    "name": "Costo Llantas Nuevas Año Anterior",
    "recipe": { "table": "h_llantas_nueva", "column": "monto_llantas_nva", "aggregation": "SUM", "time_modifier": "previous_year", "format": "currency" }
  },
  "costo_llantas_renovadas_anterior": {
    "name": "Costo Llantas Renovadas Año Anterior",
    "recipe": { "table": "h_llantas_renovada", "column": "monto_llantas_ren", "aggregation": "SUM", "time_modifier": "previous_year", "format": "currency" }
  },
  "costo_llantas_nuevas_ytd": {
    "name": "Costo Llantas Nuevas Acumulado",
    "recipe": { "table": "h_llantas_nueva", "column": "monto_llantas_nva", "aggregation": "SUM", "time_modifier": "ytd", "format": "currency" }
  },
  "costo_llantas_renovadas_ytd": {
    "name": "Costo Llantas Renovadas Acumulado",
    "recipe": { "table": "h_llantas_renovada", "column": "monto_llantas_ren", "aggregation": "SUM", "time_modifier": "ytd", "format": "currency" }
  },
  "meta_costo_mtto_llantas": {
    "name": "Meta Costo Mtto Llantas",
    "recipe": { "table": "d_meta_tiempo", "column": "meta_costo_tallerllantas", "aggregation": "SUM", "format": "currency" }
  },
  "meta_costo_mtto_llantas_ytd": {
    "name": "Meta Costo Mtto Llantas Acumulado",
    "recipe": { "table": "d_meta_tiempo", "column": "meta_costo_tallerllantas", "aggregation": "SUM", "time_modifier": "ytd", "format": "currency" }
  },
  "dias_disponibles": {
    "name": "Días Disponibles",
    "description": "Suma de días disponibles de las unidades",
    "recipe": {
      "table": "h_unidad_indicadores_mes_diario",
      "column": "dias_disponibles",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "dias_mes": {
    "name": "Días del Mes",
    "description": "Suma de días totales del mes para las unidades",
    "recipe": {
      "table": "h_unidad_indicadores_mes_diario",
      "column": "dias_mes",
      "aggregation": "SUM",
      "format": "integer"
    }
  },
  "kms_recorridos": {
    "name": "Kilómetros Recorridos",
    "recipe": { "table": "d_unidad_kilometros_diarios", "column": "kms_recorridos", "aggregation": "SUM", "format": "decimal" }
  },
  "kms_recorridos_anterior": {
    "name": "Kms Recorridos Año Anterior",
    "recipe": { "table": "d_unidad_kilometros_diarios", "column": "kms_recorridos", "aggregation": "SUM", "time_modifier": "previous_year", "format": "decimal" }
  },
  "kms_recorridos_ytd": {
    "name": "Kms Recorridos Acumulado",
    "recipe": { "table": "d_unidad_kilometros_diarios", "column": "kms_recorridos", "aggregation": "SUM", "time_modifier": "ytd", "format": "decimal" }
  },

  "meta_costo_mtto_x_km": {
    "name": "Meta Costo Mtto x Km",
    "recipe": { "table": "d_meta_tiempo", "column": "meta_costo_mtto_x_km", "aggregation": "SUM", "format": "currency" }
  },
  "meta_costo_mtto_x_km_ytd": {
    "name": "Meta Costo Mtto x Km Acumulado",
    "recipe": { "table": "d_meta_tiempo", "column": "meta_costo_mtto_x_km", "aggregation": "SUM", "time_modifier": "ytd", "format": "currency" }
  }
}