{
  "h_viaje": {
    "table_name": "h_viaje",
    "type": "fact",
    "pk": "no_viaje",
    "date_column": "fecha_real_viaje",
    "fields": {
      "subtotal": "decimal",
      "no_viaje": "integer", 
      "id_area": "integer",
      "id_tipo_operacion": "integer",
      "flete": "decimal",
      "otros": "decimal",
      "autopistas": "decimal",
      "maniobras": "decimal",
      "seguro": "decimal",
      "monto_retencion": "decimal",
      "iva_guia": "decimal"
    },
    "joins": {
      "viaje_operativo": {
        "target_table": "d_viaje",
        "type": "INNER",
        "on": "h_viaje.id_area = d_viaje.id_area AND h_viaje.no_viaje = d_viaje.no_viaje"
      },
      "tipo_operacion": {
        "target_table": "d_tipo_operacion",
        "type": "INNER",
        "on": "h_viaje.id_tipo_operacion = d_tipo_operacion.id_tipo_operacion"
      },
      "area": {
        "target_table": "d_area",
        "type": "INNER",
        "on": "h_viaje.id_area = d_area.id_area"
      }
    }
  },
  "d_viaje": {
    "table_name": "d_viaje",
    "type": "dim",
    "pk": "no_viaje",
    "date_column": "fecha_liquidacion",
    "description": "Tabla operativa de viajes con detalles de ruta y kilometraje",
    "fields": {
      "no_viaje": "integer",
      "ind_cargado": "integer",
      "kms_real": "decimal",
      "kms_viaje": "decimal",
      "lts_real": "decimal",
      "lts_viaje": "decimal",
      "sueldo_operador": "decimal",
      "id_unidad": "string",
      "fecha_liquidacion": "date",
      "id_area": "integer"
    },
    "joins": {
      "ruta": {
        "target_table": "d_ruta",
        "type": "INNER",
        "on": "d_viaje.id_ruta = d_ruta.id_ruta"
      },
      "unidad": {
        "target_table": "d_unidad",
        "type": "INNER",
        "on": "d_viaje.id_unidad = d_unidad.id_unidad"
      },
      "operador": {
        "target_table": "d_personal",
        "type": "INNER",
        "on": "d_viaje.id_operador = d_personal.id_personal"
      },
      "relacion_cp": {
        "target_table": "h_relacion_viaje_cp",
        "type": "INNER",
        "on": "d_viaje.id_area = h_relacion_viaje_cp.id_area AND d_viaje.no_viaje = h_relacion_viaje_cp.no_viaje"
      },
      "viaje_historico": {
        "target_table": "h_viaje",
        "type": "INNER",
        "on": "d_viaje.id_area = h_viaje.id_area AND d_viaje.no_viaje = h_viaje.no_viaje"
      },
      "gastos": {
        "target_table": "h_viajes_gastos_liquidacion",
        "type": "INNER",
        "on": "d_viaje.id_area = h_viajes_gastos_liquidacion.id_area_viaje AND d_viaje.no_viaje = h_viajes_gastos_liquidacion.no_viaje"
      }
    }
  },
  "d_ruta": {
    "table_name": "d_ruta",
    "type": "dim",
    "pk": "id_ruta",
    "label_column": "ruta",
    "fields": {
      "kms_ruta": "decimal",
      "origen": "varchar",
      "destino": "varchar"
    }
  },
  "h_viajes_gastos_liquidacion": {
    "table_name": "h_viajes_gastos_liquidacion",
    "type": "fact",
    "pk": "id_comp", 
    "fields": {
      "id_comp": "integer",
      "monto_concepto": "decimal",
      "monto_combustible": "decimal",
      "monto_caseta_iave": "decimal",
      "monto_caseta_efectivo": "decimal",
      "iva_concepto": "decimal",
      "cantidad": "decimal",
      "id_area_viaje": "integer",
      "no_viaje": "integer",
      "id_area_liq": "integer",
      "no_liquidacion": "integer",
      "id_concepto": "integer",
      "id_gpogasto": "integer"
    },
    "joins": {
      "liquidacion": {
        "target_table": "d_liquidacion",
        "type": "INNER",
        "on": "h_viajes_gastos_liquidacion.id_area_liq = d_liquidacion.id_area AND h_viajes_gastos_liquidacion.no_liquidacion = d_liquidacion.no_liquidacion"
      },
      "concepto": {
        "target_table": "d_trafico_concepto",
        "type": "INNER",
        "on": "h_viajes_gastos_liquidacion.id_concepto = d_trafico_concepto.id_concepto"
      },
      "gpogasto": {
        "target_table": "d_trafico_gpogasto",
        "type": "INNER",
        "on": "h_viajes_gastos_liquidacion.id_gpogasto = d_trafico_gpogasto.id_gpogasto"
      },
      "viaje": {
        "target_table": "d_viaje",
        "type": "INNER",
        "on": "h_viajes_gastos_liquidacion.id_area_viaje = d_viaje.id_area AND h_viajes_gastos_liquidacion.no_viaje = d_viaje.no_viaje"
      }
    }
  },
  "d_unidad": {
    "table_name": "d_unidad",
    "type": "dim",
    "pk": "id_unidad",
    "label_column": "id_unidad",
    "fields": {
      "modelo": "string",
      "id_unidad": "string",
      "id_marca": "integer"
    },
    "joins": {
      "marca_unidad": {
        "target_table": "d_marca_unidad",
        "type": "INNER",
        "on": "d_unidad.id_marca = d_marca_unidad.id_marca_unidad"
      },
      "tipo_unidad": {
        "target_table": "d_tipo_unidad",
        "type": "INNER",
        "on": "d_unidad.id_tipo_unidad = d_tipo_unidad.id_tipo_unidad"
      },
      "flota": {
        "target_table": "d_area",
        "type": "LEFT",
        "on": "d_unidad.id_area = d_area.id_area"
      }
    }
  },
  "d_personal": {
    "table_name": "d_personal",
    "type": "dim",
    "pk": "id_personal",
    "label_column": "nombre"
  },
  "d_trafico_cliente": {
    "table_name": "d_trafico_cliente",
    "type": "dim",
    "pk": "id_cliente",
    "label_column": "nombre_cliente"
  },
  "d_trafico_guia": {
    "table_name": "d_trafico_guia",
    "type": "dim",
    "pk": "pk_guia",
    "joins": {
      "estatus_guia": {
        "target_table": "d_estatus_guia",
        "type": "INNER",
        "on": "d_trafico_guia.estatus_guia = d_estatus_guia.id_estatus_guia"
      },
      "guia_proceso_cancelasat": {
        "target_table": "d_guia_proceso_cancelasat",
        "type": "LEFT",
        "on": "d_trafico_guia.num_guia = d_guia_proceso_cancelasat.factura"
      },
      "cliente": {
        "target_table": "d_trafico_cliente",
        "type": "INNER",
        "on": "d_trafico_guia.id_cliente = d_trafico_cliente.id_cliente"
      }
    }
  },
  "h_relacion_viaje_cp": {
    "table_name": "h_relacion_viaje_cp",
    "type": "fact",
    "pk": "id_relacion",
    "joins": {
      "guia": {
        "target_table": "d_trafico_guia",
        "type": "INNER",
        "on": "h_relacion_viaje_cp.id_area_guia = d_trafico_guia.id_area AND h_relacion_viaje_cp.no_guia = d_trafico_guia.no_guia"
      },
      "viaje": {
        "target_table": "d_viaje",
        "type": "INNER",
        "on": "h_relacion_viaje_cp.id_area = d_viaje.id_area AND h_relacion_viaje_cp.no_viaje = d_viaje.no_viaje"
      }
    }
  },
  "d_trafico_concepto": {
    "table_name": "d_trafico_concepto",
    "type": "dim",
    "pk": "id_concepto",
    "label_column": "descripcion_concepto",
    "fields": {
      "concepto": "string",
      "id_concepto": "integer",
      "id_clasificacion": "integer"
    },
    "joins": {
      "clasificacion": {
        "target_table": "d_trafico_concepto_clasificacion",
        "type": "INNER",
        "on": "d_trafico_concepto.id_clasificacion = d_trafico_concepto_clasificacion.id_clasificacion"
      }
    }
  },
  "d_trafico_concepto_clasificacion": {
    "table_name": "d_trafico_concepto_clasificacion",
    "type": "dim",
    "pk": "id_clasificacion",
    "columns": {
      "nombre": "string",
      "id_clasificacion": "integer"
    }
  },
  "d_meta_tiempo": {
    "table_name": "d_meta_tiempo",
    "description": "Tabla de presupuestos y metas diarias/mensuales",
    "type": "fact",
    "pk": "fecha",
    "date_column": "fecha",
    "fields": {
      "meta_ingreso_viaje": "decimal",
      "meta_costos_viaje": "decimal",
      "meta_kms_recorridos": "decimal",
      "meta_litros_combustible": "decimal",
      "fecha": "date"
    }
  },
  "d_area": {
    "table_name": "d_area",
    "description": "Sucursales o bases operativas (ej. Base Veracruz, Base MÃ©xico)",
    "type": "dim",
    "pk": "id_area",
    "label_column": "no_area"
  },
  "d_tipo_operacion": {
    "table_name": "d_tipo_operacion",
    "description": "Giro del servicio (ej. Refinados, Contenedor, Carga General)",
    "type": "dim",
    "pk": "id_tipo_operacion",
    "fields": {
      "tipo_operacion": "string",
      "id_tipo_operacion": "integer"
    },
    "label_column": "tipo_operacion"
  },
  "d_liquidacion": {
    "table_name": "d_liquidacion",
    "type": "dim",
    "pk": "pk_liquidacion",
    "business_key": [
      "id_area",
      "no_liquidacion"
    ]
  },
  "d_trafico_gpogasto": {
    "table_name": "d_trafico_gpogasto",
    "type": "dim",
    "pk": "id_gpogasto"
  },
  "d_tipo_unidad": {
    "table_name": "d_tipo_unidad",
    "type": "dim",
    "pk": "id_tipo_unidad"
  },
  "d_estatus_guia": {
    "table_name": "d_estatus_guia",
    "type": "dim",
    "pk": "id_estatus_guia"
  },
  "d_guia_proceso_cancelasat": {
    "table_name": "d_guia_proceso_cancelasat",
    "type": "dim",
    "pk": "factura"
  },
  "d_marca_unidad": {
    "table_name": "d_marca_unidad",
    "type": "dim",
    "pk": "id_marca_unidad",
    "fields": {
      "marca_unidad": "string",
      "id_marca_unidad": "integer"
    }
  }
}