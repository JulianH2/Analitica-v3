{
  "h_viaje": {
    "table_name": "h_viaje",
    "type": "fact",
    "pk": "no_viaje",
    "date_column": "fecha_real_viaje",
    "joins": {
      "viaje_operativo": {
        "target_table": "d_viaje",
        "type": "INNER",
        "on": "h_viaje.id_area = d_viaje.id_area AND h_viaje.no_viaje = d_viaje.no_viaje"
      },
      "tipo_operacion": {
        "target_table": "d_tipo_operacion",
        "type": "INNER",
        "on": "h_viaje.id_tipo_operacion = d_tipo_operacion.id_tipo_operacion"
      },
      "area": {
        "target_table": "d_area",
        "type": "INNER",
        "on": "h_viaje.id_area = d_area.id_area"
      }
    }
  },
  "d_viaje": {
    "table_name": "d_viaje",
    "type": "dim",
    "pk": "no_viaje",
    "description": "Tabla operativa de viajes con detalles de ruta y kilometraje",
    "fields": {
      "ind_cargado": "integer"
    },
    "joins": {
      "ruta": {
        "target_table": "d_ruta",
        "type": "INNER",
        "on": "d_viaje.id_ruta = d_ruta.id_ruta"
      },
      "unidad": {
        "target_table": "d_unidad",
        "type": "INNER",
        "on": "d_viaje.id_unidad = d_unidad.id_unidad"
      },
      "operador": {
        "target_table": "d_personal",
        "type": "INNER",
        "on": "d_viaje.id_operador = d_personal.id_personal"
      },
      "relacion_cp": {
        "target_table": "h_relacion_viaje_cp",
        "type": "INNER",
        "on": "d_viaje.id_area = h_relacion_viaje_cp.id_area AND d_viaje.no_viaje = h_relacion_viaje_cp.no_viaje"
      }
    }
  },
  "d_ruta": {
    "table_name": "d_ruta",
    "type": "dim",
    "pk": "id_ruta",
    "label_column": "ruta",
    "fields": {
      "kms_ruta": "decimal",
      "origen": "varchar",
      "destino": "varchar"
    }
  },
  "h_viajes_gastos_liquidacion": {
    "table_name": "h_viajes_gastos_liquidacion",
    "type": "fact",
    "pk": "id_gasto",
    "joins": {
      "liquidacion": {
        "target_table": "d_liquidacion",
        "type": "INNER",
        "on": "h_viajes_gastos_liquidacion.id_area_liq = d_liquidacion.id_area AND h_viajes_gastos_liquidacion.no_liquidacion = d_liquidacion.no_liquidacion"
      },
      "concepto": {
        "target_table": "d_trafico_concepto",
        "type": "INNER",
        "on": "h_viajes_gastos_liquidacion.id_concepto = d_trafico_concepto.id_concepto"
      },
      "gpogasto": {
        "target_table": "d_trafico_gpogasto",
        "type": "INNER",
        "on": "h_viajes_gastos_liquidacion.id_gpogasto = d_trafico_gpogasto.id_gpogasto"
      },
      "viaje": {
        "target_table": "d_viaje",
        "type": "INNER",
        "on": "h_viajes_gastos_liquidacion.id_area_viaje = d_viaje.id_area AND h_viajes_gastos_liquidacion.no_viaje = d_viaje.no_viaje"
      }
    }
  },
  "d_unidad": {
    "table_name": "d_unidad",
    "type": "dim",
    "pk": "id_unidad",
    "label_column": "id_unidad",
    "joins": {
      "tipo_unidad": {
        "target_table": "d_tipo_unidad",
        "type": "INNER",
        "on": "d_unidad.id_tipo_unidad = d_tipo_unidad.id_tipo_unidad"
      },
      "flota": {
        "target_table": "d_area",
        "type": "LEFT",
        "on": "d_unidad.id_area = d_area.id_area"
      }
    }
  },
  "d_personal": {
    "table_name": "d_personal",
    "type": "dim",
    "pk": "id_personal",
    "label_column": "nombre"
  },
  "d_trafico_cliente": {
    "table_name": "d_trafico_cliente",
    "type": "dim",
    "pk": "id_cliente",
    "label_column": "nombre_cliente"
  },
  "d_trafico_guia": {
    "table_name": "d_trafico_guia",
    "type": "dim",
    "pk": "pk_guia",
    "joins": {
      "estatus_guia": {
        "target_table": "d_estatus_guia",
        "type": "INNER",
        "on": "d_trafico_guia.estatus_guia = d_estatus_guia.id_estatus_guia"
      },
      "guia_proceso_cancelasat": {
        "target_table": "d_guia_proceso_cancelasat",
        "type": "LEFT",
        "on": "d_trafico_guia.num_guia = d_guia_proceso_cancelasat.factura"
      },
      "cliente": {
        "target_table": "d_trafico_cliente",
        "type": "INNER",
        "on": "d_trafico_guia.id_cliente = d_trafico_cliente.id_cliente"
      }
    }
  },
  "h_relacion_viaje_cp": {
    "table_name": "h_relacion_viaje_cp",
    "type": "fact",
    "pk": "id_relacion",
    "joins": {
      "guia": {
        "target_table": "d_trafico_guia",
        "type": "INNER",
        "on": "h_relacion_viaje_cp.id_area_guia = d_trafico_guia.id_area AND h_relacion_viaje_cp.no_guia = d_trafico_guia.no_guia"
      },
      "viaje": {
        "target_table": "d_viaje",
        "type": "INNER",
        "on": "h_relacion_viaje_cp.id_area = d_viaje.id_area AND h_relacion_viaje_cp.no_viaje = d_viaje.no_viaje"
      }
    }
  },
  "d_trafico_concepto": {
    "table_name": "d_trafico_concepto",
    "type": "dim",
    "pk": "id_concepto",
    "label_column": "descripcion_concepto"
  },
  "d_meta_tiempo": {
    "table_name": "d_meta_tiempo",
    "type": "fact",
    "pk": "fecha",
    "date_column": "fecha",
    "description": "Tabla de presupuestos y metas diarias/mensuales"
  },
  "d_area": {
    "table_name": "d_area",
    "description": "Sucursales o bases operativas (ej. Base Veracruz, Base MÃ©xico)",
    "type": "dim",
    "pk": "id_area",
    "label_column": "no_area"
  },
  "d_tipo_operacion": {
    "table_name": "d_tipo_operacion",
    "description": "Giro del servicio (ej. Refinados, Contenedor, Carga General)",
    "type": "dim",
    "pk": "id_tipo_operacion",
    "label_column": "tipo_operacion"
  },
  "d_liquidacion": {
    "table_name": "d_liquidacion",
    "type": "dim",
    "pk": "pk_liquidacion",
    "business_key": [
      "id_area",
      "no_liquidacion"
    ]
  },
  "d_trafico_gpogasto": {
    "table_name": "d_trafico_gpogasto",
    "type": "dim",
    "pk": "id_gpogasto"
  },
  "d_tipo_unidad": {
    "table_name": "d_tipo_unidad",
    "type": "dim",
    "pk": "id_tipo_unidad"
  },
  "d_estatus_guia": {
    "table_name": "d_estatus_guia",
    "type": "dim",
    "pk": "id_estatus_guia"
  },
  "d_guia_proceso_cancelasat": {
    "table_name": "d_guia_proceso_cancelasat",
    "type": "dim",
    "pk": "factura"
  }
}